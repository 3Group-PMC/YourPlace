require(["esri/map","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/WMSLayer","dojo/query","esri/dijit/Search","esri/dijit/Popup","esri/dijit/PopupTemplate","esri/config","esri/layers/CSVLayer","esri/Color","esri/symbols/SimpleMarkerSymbol","esri/renderers/SimpleRenderer","esri/InfoTemplate","bootstrap/Collapse","calcite-maps/calcitemaps-v0.2","dojo/domReady!"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){var b=new f({map:q,enableHighlight:!1},a);return b.startup(),b}function p(){var a=[];a=q.layerIds,a=a.concat(q.graphicsLayerIds),a.forEach(function(a){"layer0"!=a&&(document.getElementById(a).checked=q.getLayer(a).visible)})}i.defaults.io.corsEnabledServers.push("drive.google.com");var q=new a("mapViewDiv",{basemap:"osm",padding:{top:50},center:[-74.08175,4.60971],zoom:15}),r=new b("https://services2.arcgis.com/NFAaR7TquHkVlqVD/arcgis/rest/services/Colegios_Bogota/FeatureServer/0",{outFields:["*"],infoTemplate:t}),s=new c("https://tiles.arcgis.com/tiles/4yjifSiIG17X0gW4/arcgis/rest/services/PopulationDensity_Bogota/MapServer",{opacity:.6}),t=new h({title:"Información de la institución {OBJECTID}",description:"{PopupInfo}"});q.addLayer(s),q.addLayer(r);var u=new j("data/DinamicaEmpresarialFormato.csv",{columnDelimiter:","}),v=new k([238,69,0,.5]),w=new l("solid",30,null,v),x=new m(w);u.setRenderer(x);var t=new n;t.setTitle("${geografia_nombre}"),t.setContent("<b>Indicador:</b> ${Indicador} <br/><b>Valor:</b> ${Valor}<br/><b>Fecha:</b> ${Mes}<br/><b>Actividad:</b> ${Actividad_Economica}"),u.setInfoTemplate(t),q.addLayer(u),r.on("zoom-start",function(){r.setVisibility(!1)}),r.on("zoom-end",function(){r.setVisibility(!0)}),s.on("zoom-start",function(){s.setVisibility(!1)}),s.on("zoom-end",function(){s.setVisibility(!0)}),e("#selectBasemapPanel").on("change",function(a){q.setBasemap(a.target.options[a.target.selectedIndex].value)});var y={};y.searchDivNav=o("searchNavDiv"),y.searchWidgetPanel=o("searchPanelDiv"),e("#layer1").on("change",function(){q.getLayer("layer1").setVisibility(!q.getLayer("layer1").visible)}),e("#graphicsLayer2").on("change",function(){q.getLayer("graphicsLayer2").setVisibility(!q.getLayer("graphicsLayer2").visible)}),e("#graphicsLayer3").on("change",function(){q.getLayer("graphicsLayer3").setVisibility(!q.getLayer("graphicsLayer3").visible)}),p()});